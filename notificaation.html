<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Notifications — Mini LMS</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="stylesheet" href="common.css" />
</head>
<body>
  <div class="container">
    <div class="header card">
      <div class="logo"><div class="box">LMS</div><div><div style="font-weight:800">Notifications</div><div class="small muted">Announcements</div></div></div>
      <div><a href="dashboard.html" class="btn ghost">← Dashboard</a></div>
    </div>

    <div class="card">
      <h3>All Notifications</h3>
      <div id="notifList"></div>
      <div style="margin-top:12px"><button id="clearBtn" class="btn ghost">Mark all Read</button></div>
    </div>
  </div>

<script>
const DB = {
  get(k,d=null){ try{ return JSON.parse(localStorage.getItem(k)) ?? d }catch(e){ return d }},
  set(k,v){ localStorage.setItem(k, JSON.stringify(v)) }
};
const notifs = DB.get('notifications',[]);
const list = document.getElementById('notifList');
function render(){
  list.innerHTML = '';
  if (!notifs.length) return list.innerHTML = '<div class="small muted">No notifications</div>';
  notifs.slice().reverse().forEach(n=>{
    const div = document.createElement('div');
    div.className='list';
    const d = new Date(n.at||Date.now());
    div.innerHTML = `<div class="item"><div style="flex:1"><div style="font-weight:800">${n.title}</div><div class="small muted">${n.body||''}</div><div class="small muted">${d.toLocaleString()}</div></div></div>`;
    list.appendChild(div);
  });
}
render();
document.getElementById('clearBtn').addEventListener('click', ()=>{
  notifs.forEach(n=>n.unread=false); DB.set('notifications', notifs); alert('Marked read');
  render();
});
</script>
</body>
</html>
